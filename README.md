# PictureOrganizer

一个基于Windows批处理的照片整理工具，能够根据EXIF拍摄日期自动将照片按"年月日"格式整理到对应文件夹中。

## 功能特性

- **智能日期提取**: 优先使用EXIF拍摄日期（DateTimeOriginal），无EXIF时自动降级使用文件修改日期
- **多格式支持**: 支持JPG、JPEG、PNG、HEIC等常见图片格式
- **中文文件夹**: 自动创建中文格式的日期文件夹（如：2023年12月5日）
- **剪切操作**: 将照片从原位置剪切到对应日期文件夹，避免重复
- **UTF-8编码**: 支持中文路径和文件名显示

## 系统要求

- Windows操作系统
- 已安装并配置ExifTool（必需）
- 支持的文件格式：JPG、JPEG、PNG、HEIC

## 安装ExifTool

### 方法一：使用项目内置ExifTool
本项目已包含Windows版本的ExifTool，位于`exiftool_files`目录中。
将exiftool.exe和exiftool_files文件夹以及自动整理照片到日期目录.bat拷贝到需要整理的图片根目录下。

### 方法二：手动安装
1. 访问 [ExifTool官网](https://exiftool.org/) 下载Windows版本
2. 解压到任意目录
3. 将ExifTool目录添加到系统环境变量PATH中

## 使用方法

1. **准备照片文件夹**: 将所有需要整理的照片放在同一个文件夹中
2. **复制批处理文件**: 将`自动整理照片到日期目录.bat`复制到照片文件夹中
3. **运行程序**: 双击运行批处理文件
4. **等待完成**: 程序会自动处理所有照片，完成后会显示"整理完成！"

## 工作流程

1. 扫描当前目录中的所有JPG、JPEG、PNG、HEIC文件
2. 对每个文件提取EXIF拍摄日期（DateTimeOriginal标签）
3. 如果无法获取EXIF日期，则使用文件修改日期作为备选
4. 根据日期创建格式为"YYYY年M月D日"的文件夹
5. 将照片剪切到对应的日期文件夹中

## 注意事项

- ⚠️ **备份重要照片**: 程序使用剪切操作，建议在运行前备份重要照片
- ⚠️ **关闭其他程序**: 运行过程中请勿关闭命令行窗口
- ⚠️ **ExifTool依赖**: 确保ExifTool已正确安装并配置环境变量
- ⚠️ **文件权限**: 确保对目标文件夹有写入权限

## 输出示例

运行前：
```
照片文件夹/
├── IMG_001.jpg (拍摄日期: 2023-12-05)
├── IMG_002.png (拍摄日期: 2023-12-05)
├── IMG_003.heic (拍摄日期: 2023-12-06)
└── 自动整理照片到日期目录.bat
```

运行后：
```
照片文件夹/
├── 2023年12月5日/
│   ├── IMG_001.jpg
│   └── IMG_002.png
├── 2023年12月6日/
│   └── IMG_003.heic
└── 自动整理照片到日期目录.bat
```

## 故障排除

### 问题：提示"exiftool不是内部或外部命令"
**解决方案**: 确保ExifTool已正确安装并添加到系统PATH环境变量中

### 问题：中文显示乱码
**解决方案**: 程序已使用UTF-8编码，确保Windows系统支持中文显示

### 问题：某些照片未被处理
**解决方案**: 检查照片格式是否在支持列表中（JPG、JPEG、PNG、HEIC）

## 技术细节

- **编码**: UTF-8 (chcp 65001)
- **延迟变量扩展**: enabledelayedexpansion
- **日期格式**: YYYY年M月D日
- **操作类型**: 剪切（move命令）
- **错误处理**: 自动降级到文件修改日期

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进这个工具！
